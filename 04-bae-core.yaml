apiVersion: apps/v1
kind: Deployment
metadata:
  name: bae-marketplace
  namespace: marketplace
spec:
  selector:
    matchLabels:
      app: bae-marketplace
  template:
    metadata:
      labels:
        app: bae-marketplace
    spec:
      containers:
        - name: logic-proxy
          image: fiware/biz-ecosystem-logic-proxy:9.15.2
          env:
            # Database
            - name: MONGODB_HOST
              value: "mongodb-bae"
            - name: MONGODB_PORT
              value: "27017"
            - name: MONGODB_USER
              value: "root"
            - name: MONGODB_PASS
              value: "password"
            
            # Keycloak / SIOP (Doel 1)
            - name: IDM_URL
              value: "https://login.tunewi.se"
            - name: IDM_REALM
              value: "ascentDataSpaceTrust"
            - name: OIDC_CLIENT_ID
              value: "business-ecosystem"
            - name: OIDC_CLIENT_SECRET
              value: "JxAiyYRXic4S6arkV191kMaPzMUJ5t5S"
            
            # TMForum API Koppelingen (Doel 2 & 3)
            - name: TMF_PARTY_HOST
              value: "tmforum-party-catalog"
            - name: TMF_CATALOG_HOST
              value: "tmforum-product-catalog"
            - name: TMF_INVENTORY_HOST
              value: "tmforum-product-inventory"
            - name: TMF_ORDERING_HOST
              value: "tmforum-product-ordering-management"
            - name: TMF_CUSTOMER_HOST
              value: "tmforum-customer-management"
            - name: TMF_ACCOUNT_HOST
              value: "tmforum-account"
            - name: TMF_RESOURCE_CATALOG_HOST
              value: "tmforum-resource-catalog"
            - name: TMF_SERVICE_CATALOG_HOST
              value: "tmforum-service-catalog"
          ports:
            - containerPort: 8004
